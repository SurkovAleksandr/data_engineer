**\*\*Предметная область\*\***

- Описание сущностей - есть
- Направления анализа - есть

**\*\*Dimensional modeling\*\***

- связи между таблицами фактов строго не рекомендованы (хоть и не запрещены), лучше делать это через общие измерения (что у вас и так по сути реализовано)
- в DM должен поддерживаться принцип иерархичности измерений, то есть от мелкой гранулярности к более крупной. Классический пример - когда в таблице фактов есть ссылка на измерение с городом, город ссылается на измерение со страной, страна на измерение с континентом, например. Таким образом очень удобно строятся все аналитические и отчетные разрезы в последствии. У вас же сейчас есть два связанных измерения (person и passport), где эта иерархичность не прослеживается. Как по мне, следовало бы паспортные данные также сложить в таблицу person и сделать ее историчной (про историчные измерения -

[https://www.kimballgroup.com/data-warehouse-business-intelligence-resources/kimball-techniques/dimensional-modeling-techniques/type-2/](https://www.kimballgroup.com/data-warehouse-business-intelligence-resources/kimball-techniques/dimensional-modeling-techniques/type-2/ "smartCard-inline") )

**\*\*Data Vault**\*\*

- по какому принципу разделены саттелиты? у всех сущностей ровно один саттелит. понятно, что пример учебный, но в реальной жизни такие штуки ухудшают использование DV
- в DV не рекомендуется задавать строгость в связях, у вас к ряду сателлитов ведет связь от хабов 1:1. Data Vault придерживается принципа «всегда храним всю историю», поэтому, следуя изначальной концепции, желательно было сделать составной РК в сателлитах из суррогатного ключа + дата загрузки. Также бизнес любит убеждать, что меняться не собирается, но по опыту это все работает не так, а такие ограничения заставят многое переделывать в хранилище и гибко сделать это уже не получится, DV - это все-таки решение про гибкость.
- линки, связывающие более 2 хабов хоть и не запрещены, но не очень рекомендуются, так как это может привести к трудностям при изменении структуры данных. Если модель содержит множество связей между хабами, любые изменения в модели данных могут потребовать значительных затрат времени и усилий для реализации этих изменений.

**\*\*Anchor modeling\*\***

- в АМ вовсе не делают связи, которые объединяют более двух якорей, там все еще строже, чем в DV. Все объекты в максимальной нормализации и связи должны быть только между двумя якорями.
- в атрибутах АМ чаще всего делают составной первичный ключ из \*_sk\* + \*load_dttm\*, потому что атрибуты строятся с «половинчатой» SCD2 (строки только добавляются, но не изменяются), поэтому по ключу в них могут находиться несколько строк, а не строго одна. У вас же бОльшая часть атрибутов вовсе не имеет составного РК и все атрибуты связаны через 1:1, вместо рекомендованного методологией 1:М.